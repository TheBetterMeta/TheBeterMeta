"use strict";window.tbm=window.tbm||{},window.tbm.assets={champions:"/assets/csv/champions-1084c358bc24e0591149048138fd80b17a17c0998eda4ea28cbfbb4d00fdf97a.csv",champions_by_patch:"/assets/csv/champions_by_patch-9edc0e55eb969faea6f270ab28570f18ae14c1addaec4a741a4066a167b93df9.csv",role_splits:"/assets/csv/role_splits-943b6748161b09de842ab374e81349494aa58e9dbf9f8b50e3a2fd381ffcd346.csv",winrate_by_map:"/assets/csv/winrate_by_map-d65142f7c36b51b97b3931e0b2a6b678d70c39a9eb54986139bfe555fe581b13.csv",champion_rating_overview:"/assets/csv/champion_rating_overview-1d6ffb144ddbefe8f9a028bb2b19a7853a1ddac25605f4f6fe0a48d7828b805e.csv",champion_winrate_by_skill:"/assets/csv/champion_winrate_by_skill-4d774ee825c53999d62bdce7e7d4e068fd21322c03b89c58706dcff0b1fdc957.csv",role_composition:"/assets/csv/role_composition-f0731f37be2202d76f2f2bb12a4e6d7bcdc1c754af4146e89a2bf1fad5c701f7.csv",role_composition_popularity:"/assets/csv/role_composition_popularity-7621bf999cbf3f0fcaec5e75012dbcb3569a8bc93dab0ab97592e4fff6312149.csv",matches_per_player:"/assets/matches_per_player-f1c2ec64bea5064b42b5a59ecfce2d2d61ec75a209f5431e6f6e782d48fbef4b.csv",ratings_3a:"/assets/ratings_3a-56b9e1b068b22b3569d341b268a6391c8e8b8c22bd5a3dad6345914a1b4473c2.csv",ratings_3b:"/assets/ratings_3b-2600f9e719074312c693799c5cacbdcbac43b956b14e31e7360a604d69ed4c26.csv",ratings_3c:"/assets/ratings_3c-858745340425d893ebea230f733244244028073889898557d4cd73cc9438fcfb.csv",advantage_vs_winrate:"/assets/advantage_vs_winrate-d61f24dd053f2d42185be46580ff5b33c4e06a1b2355fd81e230e56ffcb9cb4d.csv",defaults:"/assets/defaults-60961bb84d2646b0b35c2a965a4440ffdb582fa127e5b647877b93db6513bc3c.json",v2_config_legendary_breakdown:"/assets/legendary_breakdown-99a891c91ee42a8fc8325d3ccf6d159201c3d7b01e448c674c0e8eecba99762c.json","v2_csv_legendary_breakdown.csv":"/assets/csv/legendary_breakdown-19a835a0ce0a7c1a25ca8cc6b1eee22cfd4482f3e0adad9ca1fa307ed1a5dcf3.csv",v2_config_map_distribution:"/assets/map_distribution-0599dd6198a1b6428a48a6bdabb05d4d7af91225cc0b810e2afa4f8212603498.json","v2_csv_map_distribution.csv":"/assets/csv/map_distribution-6c2106174fa6ed2dba34ce7aaa65dda0a017028bcd1e5d2dacc6c0290e570c0d.csv",v2_config_matches_per_minute:"/assets/matches_per_minute-2bf0e98916338f4dba309dd09241a825547dca9373123df8eb0bc3d6b5b8a548.json","v2_csv_matches_per_minute.csv":"/assets/csv/matches_per_minute-95e870cbf473cd2de431a4ab92fcb1b524ea7daa1052673c51609782f7db999b.csv",v2_config_ranks:"/assets/ranks-cc453e4cb269a3fe251a53b63481cfcbfad45ef753d5e818111d97f668e7201e.json","v2_csv_tier_distribution.csv":"/assets/csv/tier_distribution-dac2bb3abaf0debd6a134f17773c086321d07765f6557417c55a91675cfe7a2a.csv",v2_config_ranks_distribution:"/assets/ranks_distribution-6458ce2ffe78585281dadd516441250a6d0d4afdc7b854e649ec8c4ced4cfa4f.json","v2_csv_tier_distribution.csv":"/assets/csv/tier_distribution-dac2bb3abaf0debd6a134f17773c086321d07765f6557417c55a91675cfe7a2a.csv"},window.tbm.ChampionLegend=function(e,t){return function(t,a,n){function r(e){tbm.trackEvent({eventCategory:n,eventAction:"toggleRole",eventLabel:e});for(var t="legend-role-"+e,a=document.getElementsByClassName(t),r=0;r<a.length;r++)a[r].className=a[r].className.replace(" active"," xxxx"),a[r].className=a[r].className.replace(" inactive"," active"),a[r].className=a[r].className.replace(" xxxx"," inactive")}var t=t,a=a,n=n;this.addClickHandlers=function(a,n){for(var o=document.getElementsByClassName("legend-role"),i=0;i<o.length;i++){var s=e(o[i]),l=/(?:^|\s)legend-role-(\w+)(?:\s|$)/,c=l.exec(s.attr("class")),u=c[1],m=function(e){return function(){return r(e),a(e)}};s.click(m(u))}for(var p=document.getElementsByClassName("legend-champion"),i=0;i<p.length;i++){var f=e(p[i]),l=/(?:^|\s)legend-champion-(\d+)(?:\s|$)/,c=l.exec(f.attr("class")),d=c[1],h=t[d].name,m=function(e,t){return function(){return e.toggleChampion(t),n(t)}};f.click(m(this,h))}},this.toggleChampion=function(e){tbm.trackEvent({eventCategory:n,eventAction:"toggleChampion",eventLabel:e});for(var t="legend-champion-"+a[e],r=document.getElementsByClassName(t),o=0;o<r.length;o++)r[o].className=r[o].className.replace(" active"," xxxx"),r[o].className=r[o].className.replace(" inactive"," active"),r[o].className=r[o].className.replace(" xxxx"," inactive")}}}(jQuery),window.tbm=window.tbm||{},window.tbm.championsRaw=[{id:"2205",name:"Androxus",role:"Flank",icon_url:"androxus"},{id:"2404",name:"Ash",role:"Tank",icon_url:"ash"},{id:"2512",name:"Atlas",role:"Tank",icon_url:"atlas"},{id:"2073",name:"Barik",role:"Tank",icon_url:"barik"},{id:"2281",name:"Bomb King",role:"Damage",icon_url:"bombking"},{id:"2147",name:"Buck",role:"Flank",icon_url:"buck"},{id:"2092",name:"Cassie",role:"Damage",icon_url:"cassie"},{id:"2495",name:"Dredge",role:"Damage",icon_url:"dredge"},{id:"2277",name:"Drogoz",role:"Damage",icon_url:"drogoz"},{id:"2094",name:"Evie",role:"Flank",icon_url:"evie"},{id:"2071",name:"Fernando",role:"Tank",icon_url:"fernando"},{id:"2491",name:"Furia",role:"Support",icon_url:"furia"},{id:"2093",name:"Grohk",role:"Support",icon_url:"grohk"},{id:"2254",name:"Grover",role:"Support",icon_url:"grover"},{id:"2509",name:"Imani",role:"Damage",icon_url:"imani"},{id:"2348",name:"Inara",role:"Tank",icon_url:"inara"},{id:"2517",name:"Io",role:"Support",icon_url:"io"},{id:"2431",name:"Jenos",role:"Support",icon_url:"jenos"},{id:"2479",name:"Khan",role:"Tank",icon_url:"khan"},{id:"2249",name:"Kinessa",role:"Damage",icon_url:"kinessa"},{id:"2493",name:"Koga",role:"Flank",icon_url:"koga"},{id:"2362",name:"Lex",role:"Flank",icon_url:"lex"},{id:"2417",name:"Lian",role:"Damage",icon_url:"lian"},{id:"2338",name:"Maeve",role:"Flank",icon_url:"maeve"},{id:"2288",name:"Makoa",role:"Tank",icon_url:"makoa"},{id:"2303",name:"Mal'Damba",role:"Support",icon_url:"maldamba"},{id:"2481",name:"Moji",role:"Flank",icon_url:"moji"},{id:"2056",name:"Pip",role:"Support",icon_url:"pip"},{id:"2149",name:"Ruckus",role:"Tank",icon_url:"ruckus"},{id:"2372",name:"Seris",role:"Support",icon_url:"seris"},{id:"2307",name:"Sha Lin",role:"Damage",icon_url:"shalin"},{id:"2057",name:"Skye",role:"Flank",icon_url:"skye"},{id:"2438",name:"Strix",role:"Damage",icon_url:"strix"},{id:"2472",name:"Talus",role:"Flank",icon_url:"talus"},{id:"2477",name:"Terminus",role:"Tank",icon_url:"terminus"},{id:"2322",name:"Torvald",role:"Tank",icon_url:"torvald"},{id:"2314",name:"Tyra",role:"Damage",icon_url:"tyra"},{id:"2285",name:"Viktor",role:"Damage",icon_url:"viktor"},{id:"2480",name:"Vivian",role:"Damage",icon_url:"vivian"},{id:"2393",name:"Willo",role:"Damage",icon_url:"willo"},{id:"2267",name:"Ying",role:"Support",icon_url:"ying"},{id:"2420",name:"Zhin",role:"Flank",icon_url:"zhin"}],window.tbm.Champions=new function(){function e(){for(var e=0;e<tbm.championsRaw.length;e++){var i=tbm.championsRaw[e],s=i.id,l=i.name,c=i.role,u=i.icon_url||"unknown";void 0==a[c]&&(a[c]=[]),r[l]={role:c,index:a[c].length},a[c].push(l),n[l]="sprite-icons35-"+u,o[l]=s,t[s]={id:s,name:l,role:c,img:u}}}var t={},a={},n={},r={},o={};this.champions=function(){return t},this.nameToId=function(){return o},this.withRole=function(e){return a[e]},this.roleIndex=function(e){return r[e]},e()},window.tbm.Tabs=function(e,t){return function(t){function a(){if(null==r&&(r=e("#"+t),!r[0]))throw"Can't find tabs '"+t+"'";return r}function n(e,t){for(var n=a().find(".tablink"),r=0;r<n.length;r++)n[r].className=n[r].className.replace(" active","");e.className+=" active"}var t=t,r=null;this.clickDefault=function(){var e=a().find(".defaultOpen");e[0]&&e[0].click()},this.addClickHandlers=function(t){for(var r=a().find(".tablink"),o=0;o<r.length;o++){var i=r[o],s=function(e,a){return function(){return n(e,a),t(a)}};e(i).click(s(i,i.textContent))}}}}(jQuery),window.tbm.Chart=function(e,t){return function(a,n,r,o,i,s){function l(e){R&&y.sort(R);var t=e.column,a=e.ascending,n=c(t);y.sort([{column:n,desc:!a}]),N._chartWrapper.setOption("sortColumn",t),N._chartWrapper.setOption("sortAscending",a),N._chartWrapper.draw()}function c(e){for(var t=N._chartWrapper.getView(),a=t.originalColumns||t.columns,n=0,r=0;r<a.length;r++)if(t.columnSettings[r]){if(n==e)return a[r];n++}return null}function u(e){for(var t=N._chartWrapper.getView(),a=t.originalColumns||t.columns,n=0;n<a.length;n++)if(a[n]==e)return n;return null}function m(e){var a=e,n=N._chartWrapper.getView();N._chartWrapper.getDataTable();if(n.originalRows==t&&(n.originalRows=n.rows),n.rowSettings==t){n.rowSettings=new Array(n.originalRows.length);for(var r=0;r<n.rowSettings.length;r++)n.rowSettings[r]=!0}f(n.rowSettings,a);for(var o=[],r=0;r<n.rowSettings.length;r++)if(n.rowSettings[r])o.push(n.originalRows[r]);else{n.originalRows[r]}n.rows=o}function p(e,a){var n=u(e),r=N._chartWrapper.getView(),o=N._chartWrapper.getDataTable();if(r.originalColumns==t&&(r.originalColumns=r.columns),r.columnSettings==t){r.columnSettings=new Array(r.originalColumns.length);for(var i=0;i<r.columnSettings.length;i++)r.columnSettings[i]=!0}f(r.columnSettings,n);for(var s=[],i=0;i<r.columnSettings.length;i++)if(r.columnSettings[i])s.push(r.originalColumns[i]);else{var l=r.originalColumns[i];a&&s.push({calc:function(e,t){return null},type:o.getColumnType(l),label:o.getColumnLabel(l)})}r.columns=s}function f(e,t){e[t]=!e[t]}function d(t){var a=e.csv.toArrays(t,{onParseValue:e.csv.hooks.castToScalar});if(a.Length<=2)throw new Error;var n=a[0];b(n),_(a),h(),v()}function h(){for(var e=new tbm.RealHT,a=new tbm.RealHT,n=0;n<F.length;n++){var i=F[n],l=o.value(i),c=r.value(i,n);if(c==t)throw new Error("Couldn't apply _X.value ("+r.value.toString()+") to ("+JSON.stringify(i)+")");for(var u=0;u<l.length;u++){var m=l[u].name;e.put(m,l[u])}a.put(c,1)}if(x=e.keys(),x=x.map(function(t){return e.get(t)}),"string"!=o.type)throw new Error;P=a.keys(),s&&(P=s)}function v(){for(var e={},t=0;t<F.length;t++)for(var a=F[t],n=r.value(a,t),i=o.value(a),s=0;s<i.length;s++){var l=i[s],c=l.name+"---"+n;e[c]=1}if(Object.keys(e).length<2)throw new Error}function g(e,a,n){var i=o.value(e),s=r.value(e,a),l=P.map(function(e){return r.forComparison(e)}).indexOf(r.forComparison(s));if(-1==l)throw new Error("x not found: "+s);for(var c=0;c<i.length;c++){var u=i[c],m=x.findIndex(function(e){return u.name==e.name});if(0>m)throw new Error;var p=n(e,u.name);if(null!=p&&p!==t)for(var f=x[m].start,d=0;d<p.length;d++){var h=p[d];y.setCell(l,f+d,h,null)}}}function b(e){if(e.length<=1)throw new Error;for(var t=0;t<e.length;t++){var a=e[t].toString(),n=a.split("|"),r=n[0],o=n[1]||r;o.includes("%")?(C[t]="percent",k.percent||(k.percent=new google.visualization.NumberFormat({pattern:"#0.0%"}))):(C[t]="decimal",k.decimal||(k.decimal=new google.visualization.NumberFormat({pattern:"#0.##"}))),S[t]=r,D[t]=o}}function _(e){for(var t=1;t<e.length;t++){var a=e[t];F[t-1]={};for(var n=0;n<S.length;n++){var r=S[n];F[t-1][r]=a[n]}}}null==r&&(r={disabled:!0,type:"number",label:"Row",value:function(e,t){return t}}),r.forComparison||(r.forComparison=function(e){return e}),i||(i={});var y,T,w,a=a,k={},C=[],S=[],D=[],R=null,F=[],P=[],x=[],N=this;d(n),this.rawData=function(){return F},this.draw=function(){w?w.draw(T):N._chartWrapper.draw()},this.setNiceVerticalTicks=function(e,t){for(var a=Number.MIN_VALUE,n=Number.MAX_VALUE,r=0;r<T.getViewColumns().length;r++){var o=T.getColumnRole(r);if("data"==o){var i=T.getColumnRange(r);i.max>a&&(a=i.max),i.min<n&&(n=i.min)}}for(var s=e?0:Math.floor(n/t)*t,l=[s];a>=s;)s+=t,l.push(s);N._chartWrapper.setOption("vAxis.ticks",l)},this.setNiceHorizontalTicks=function(e){for(var t=T.getColumnRange(0),a=Math.ceil(t.min/e)*e,n=[a];a<=t.max;)a+=e,a<t.max&&n.push(a);N._chartWrapper.setOption("hAxis.ticks",n)},this.bind=function(e,t){w=e,e.bind(t,N._chartWrapper)},this.setSort=function(e){for(var t=[],a=0;a<arguments.length;a++){var n=arguments[a],r=S.indexOf(n);if(0>r)return void console.log("Can't find field",n);t.push({column:r})}R=t},this.formatX=function(e){N._formatter=e,e.format(y,0)},this.formatY=function(e){N._formatterY=e,N.formatYAux(e)},this.formatYAux=function(e){for(var t=N._chartWrapper.getDataTable(),a=1;a<t.getNumberOfColumns();a++)e.format(y,a)},this.format=function(e,t){for(var a=N._chartWrapper.getDataTable(),n=0;n<a.getNumberOfColumns();n++){var r=a.getColumnLabel(n);if(e==r){C[n]=t,t.format(y,n);break}}},this.shiftX=function(e){var t=N._chartWrapper.getView(),a=N._chartWrapper.getDataTable(),n=t.columns;n[0]={calc:function(t,a){var n=t.getValue(a,0),r=e(n);return{v:r,f:N._formatter.formatValue(r)}},type:a.getColumnType(0),label:a.getColumnLabel(0)},N._formatter&&N._formatter.format(y,0)},this.getOptions=function(){var e=N._chartWrapper.getOptions();return e},this.basicOptions=function(){var e={chartArea:{left:60,top:10,right:10,bottom:60},hAxis:{title:r.label,slantedText:!1,gridlines:{},textStyle:{}},interpolateNulls:!0,vAxis:{gridlines:{count:10},viewWindowMode:"explicit",format:"decimal",textStyle:{}},legend:{},sort:"event",annotations:{style:"line"}};return e},this.finalize=function(e){for(var t=[],n=0;n<T.getNumberOfColumns();n++)t[n]=n;for(var o=[],n=0;n<T.getNumberOfRows();n++)o[n]=n;r.disabled&&(t=t.slice(1));var i=new google.visualization.ChartWrapper({chartType:e.chartType,dataTable:T,options:e.options,containerId:a,view:{columns:t,rows:o}});N._chartWrapper=i;var s=google.visualization.events.addListener(i,"ready",function(){google.visualization.events.removeListener(s),google.visualization.events.addListener(i.getChart(),"sort",l)})},this.toggleRow=function(e){for(var t=N._chartWrapper.getDataTable(),a=0;a<t.getNumberOfRows();a++)e(t,a)&&m(a)},this.toggleSeries=function(e,a){a==t&&(a=!0);for(var n=N._chartWrapper.getDataTable(),r=0;r<n.getNumberOfColumns();r++){var o=n.getColumnLabel(r);if(e==o){p(r,a);break}}},this.appendSource=function(t){var n=e("<div>",{"class":"chart-source"}),r=e("<a>",{"class":"source",href:t});r.append("Raw data"),n.append(r),e("#"+a).closest(".chart-wrapper").after(n)},this.getView=function(){var e=new google.visualization.DataTable,t=0;e.addColumn(r.type,r.label);var t=1;i.domainAnnotation&&(t++,e.addColumn({type:"string",role:"annotation"}));for(var a=0;a<x.length;a++){var n=x[a];n.start=t;for(var o=0;o<n.cols.length;o++){var s=n.cols[o];e.addColumn(s),t++}}e.addRows(P.length);for(var a=0;a<P.length;a++){var l=P[a];e.setCell(a,0,l),i.domainAnnotation&&l==i.domainAnnotation.at&&e.setCell(a,1,"")}var c=new google.visualization.DataView(e);return y=e,T=c,c},this.wipe=function(){for(var e=1;e<y.getNumberOfColumns();e++)for(var t=0;t<y.getNumberOfRows();t++)y.setCell(t,e,null,null)},this.setData=function(e,a){for(var n=0;n<F.length;n++){var r=F[n];g(r,n,e)}var o;if(a!==t){var i="unknown",s=S.indexOf(a);if(0>s)o=a;else{o=D[s],N._formatterY||(i=C[s]);var l=N._formatterY||k[i];l&&N.formatYAux(l)}N._chartWrapper.setOption("vAxis.title",o),"unknown"!=i&&N._chartWrapper.setOption("vAxis.format",i)}}}}(jQuery),tbm.ChartOnPage=function(e,t,a){function n(){var e=$.get(i.csv,function(e){var t=o(e);l(m,t)});e.then(function(){c.resolve()})}function r(){tbm.chartsPromise.then(n)}function o(e){return m=s(i,e),void 0==i.includeSource&&(i.includeSource=!0),i.includeSource&&m.appendSource(i.csv),m.getView()}var i=null,s=t,l=a,c=$.Deferred(),u=c.promise(),m="JUNK";tbm.ChartOnPage.prototype.constructor=function(e){if(!e)throw"Need to pass in a settings object";for(var t=["pageName","csv","containerId"],a=0;a<t.length;a++){var n=t[a];if(!e[n])throw"settings is missing "+n}i=e,r()},this.Chart=function(){return m},this.ready=function(e){u.then(e)},this.shiftX=function(e){m.shiftX(e)},this.draw=function(){m.draw()},this.getOptions=function(){var e=m.getOptions();return e},this.constructor.apply(this,arguments)},window.tbm=window.tbm||{},window.tbm.compositionPopularityRaw=[{Composition:"5T-0D-0S-0F","Popularity|% Teams":" 2.406e-05",Rank:"52"},{Composition:"4T-1D-0S-0F","Popularity|% Teams":" 2.598e-05",Rank:"51"},{Composition:"4T-0D-1S-0F","Popularity|% Teams":" 1.318e-04",Rank:"39"},{Composition:"4T-0D-0S-1F","Popularity|% Teams":" 9.623e-06",Rank:"55"},{Composition:"3T-2D-0S-0F","Popularity|% Teams":" 1.251e-04",Rank:"40"},{Composition:"3T-1D-1S-0F","Popularity|% Teams":" 3.360e-03",Rank:"13"},{Composition:"3T-1D-0S-1F","Popularity|% Teams":" 3.743e-04",Rank:"29"},{Composition:"3T-0D-2S-0F","Popularity|% Teams":" 2.983e-04",Rank:"34"},{Composition:"3T-0D-1S-1F","Popularity|% Teams":" 1.060e-03",Rank:"19"},{Composition:"3T-0D-0S-2F","Popularity|% Teams":" 1.636e-05",Rank:"54"},{Composition:"2T-3D-0S-0F","Popularity|% Teams":" 3.118e-04",Rank:"32"},{Composition:"2T-2D-1S-0F","Popularity|% Teams":" 1.895e-01",Rank:"2"},{Composition:"2T-2D-0S-1F","Popularity|% Teams":" 1.975e-03",Rank:"15"},{Composition:"2T-1D-2S-0F","Popularity|% Teams":" 3.727e-02",Rank:"5"},{Composition:"2T-1D-1S-1F","Popularity|% Teams":" 5.205e-01",Rank:"1"},{Composition:"2T-1D-0S-2F","Popularity|% Teams":" 9.036e-04",Rank:"20"},{Composition:"2T-0D-3S-0F","Popularity|% Teams":" 4.686e-04",Rank:"27"},{Composition:"2T-0D-2S-1F","Popularity|% Teams":" 1.213e-02",Rank:"8"},{Composition:"2T-0D-1S-2F","Popularity|% Teams":" 7.313e-03",Rank:"10"},{Composition:"2T-0D-0S-3F","Popularity|% Teams":" 3.272e-05",Rank:"48"},{Composition:"1T-4D-0S-0F","Popularity|% Teams":" 2.059e-04",Rank:"37"},{Composition:"1T-3D-1S-0F","Popularity|% Teams":" 1.245e-02",Rank:"7"},{Composition:"1T-3D-0S-1F","Popularity|% Teams":" 1.388e-03",Rank:"16"},{Composition:"1T-2D-2S-0F","Popularity|% Teams":" 1.050e-02",Rank:"9"},{Composition:"1T-2D-1S-1F","Popularity|% Teams":" 1.059e-01",Rank:"3"},{Composition:"1T-2D-0S-2F","Popularity|% Teams":" 1.372e-03",Rank:"18"},{Composition:"1T-1D-3S-0F","Popularity|% Teams":" 8.757e-04",Rank:"21"},{Composition:"1T-1D-2S-1F","Popularity|% Teams":" 3.622e-02",Rank:"6"},{Composition:"1T-1D-1S-2F","Popularity|% Teams":" 3.840e-02",Rank:"4"},{Composition:"1T-1D-0S-3F","Popularity|% Teams":" 3.301e-04",Rank:"31"},{Composition:"1T-0D-4S-0F","Popularity|% Teams":" 7.409e-05",Rank:"42"},{Composition:"1T-0D-3S-1F","Popularity|% Teams":" 3.012e-04",Rank:"33"},{Composition:"1T-0D-2S-2F","Popularity|% Teams":" 1.381e-03",Rank:"17"},{Composition:"1T-0D-1S-3F","Popularity|% Teams":" 7.583e-04",Rank:"23"},{Composition:"1T-0D-0S-4F","Popularity|% Teams":" 2.694e-05",Rank:"50"},{Composition:"0T-5D-0S-0F","Popularity|% Teams":" 1.386e-04",Rank:"38"},{Composition:"0T-4D-1S-0F","Popularity|% Teams":" 5.822e-04",Rank:"25"},{Composition:"0T-4D-0S-1F","Popularity|% Teams":" 4.090e-04",Rank:"28"},{Composition:"0T-3D-2S-0F","Popularity|% Teams":" 3.695e-04",Rank:"30"},{Composition:"0T-3D-1S-1F","Popularity|% Teams":" 3.914e-03",Rank:"11"},{Composition:"0T-3D-0S-2F","Popularity|% Teams":" 5.485e-04",Rank:"26"},{Composition:"0T-2D-3S-0F","Popularity|% Teams":" 1.126e-04",Rank:"41"},{Composition:"0T-2D-2S-1F","Popularity|% Teams":" 2.049e-03",Rank:"14"},{Composition:"0T-2D-1S-2F","Popularity|% Teams":" 3.449e-03",Rank:"12"},{Composition:"0T-2D-0S-3F","Popularity|% Teams":" 2.444e-04",Rank:"36"},{Composition:"0T-1D-4S-0F","Popularity|% Teams":" 5.870e-05",Rank:"44"},{Composition:"0T-1D-3S-1F","Popularity|% Teams":" 2.762e-04",Rank:"35"},{Composition:"0T-1D-2S-2F","Popularity|% Teams":" 8.458e-04",Rank:"22"},{Composition:"0T-1D-1S-3F","Popularity|% Teams":" 7.496e-04",Rank:"24"},{Composition:"0T-1D-0S-4F","Popularity|% Teams":" 5.292e-05",Rank:"46"},{Composition:"0T-0D-5S-0F","Popularity|% Teams":" 6.832e-05",Rank:"43"},{Composition:"0T-0D-4S-1F","Popularity|% Teams":" 2.887e-05",Rank:"49"},{Composition:"0T-0D-3S-2F","Popularity|% Teams":" 7.698e-06",Rank:"56"},{Composition:"0T-0D-2S-3F","Popularity|% Teams":" 3.657e-05",Rank:"47"},{Composition:"0T-0D-1S-4F","Popularity|% Teams":" 5.774e-05",Rank:"45"},{Composition:"0T-0D-0S-5F","Popularity|% Teams":" 2.406e-05",Rank:"53"}],window.tbm.RoleCompositionPopularity=new function(){function e(){for(var e=0;e<tbm.compositionPopularityRaw.length;e++){var n=tbm.compositionPopularityRaw[e],r=n.Composition,o=n["Popularity|% Teams"],i=n.Rank;void 0==t[r]&&(t[r]=[]),t[r]={frequency:o,rank:i},a.push(r)}}var t={},a=[];this.compTable=function(){return t},this.ranks=function(){return a},e()};var __awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,o){function i(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function a(e){return function(t){return n([e,t])}}function n(a){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(n){a=[6,n],o=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var r,o,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},_colorFromRole={Tank:"#48A7D2",Damage:"#D24648",Flank:"#8B47D3",Support:"#48D271"},FilterSettings=function(){function e(e){this.filters=e,this._types={},this._keys={},this._dict={};var t={};e.map(function(e){t[e.name]=e.type}),this._types=t;var a={};e.map(function(e){a[e.name]=e.column}),this._keys=a}return e.prototype.set=function(e,t){this._dict[e]=t},e.prototype.where=function(){var e="where 1=1";for(var t in this._dict){var a=this._dict[t],n=this._keys[t];e+="number"==this._types[t]?" and "+n+" = "+a:" and "+n+" = '"+a+"'"}return e},e}(),PlotlyWrapper=function(){function e(e,t,a,n){var r=this;this.graphDiv=e,this.filterDiv=t,this.config=a,this._ysData={},this._plotlyConfig={displayModeBar:!1,displaylogo:!1},this._config=a,this._graphDiv=e,this._filterDiv=t,this._csvFile=n,this._filterSettings=new FilterSettings(a.filters),a.selectable?a.selectable.map(function(e){r._ysData[e.name]=e.data}):a.selectable=[],a.newColumns||(a.newColumns=[]),this._newColumns="";for(var o=0,i=a.newColumns;o<i.length;o++){var s=i[o];this._newColumns+=", "+s.value+" AS "+s.name}}return e.create=function(t,a,n,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return o=new e(t,a,n,r),[4,o.buildSettings()];case 1:return i.sent(),[2,o]}})})},e.prototype.buildSettings=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s;return __generator(this,function(l){switch(l.label){case 0:e=$.get(this._csvFile),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,e];case 2:return t=l.sent(),a=$.csv.toObjects(t,{onParseValue:$.csv.hooks.castToScalar}),this._arrayData=a,[4,alasql.promise("select * from ?",[this._arrayData])];case 3:for(n=l.sent(),this.addSelections(n,this._config.selectable),r=0,o=this._config.filters;r<o.length;r++)i=o[r],this.addFilter(n,i);return[3,5];case 4:return s=l.sent(),console.log("Error loading csv",s),[3,5];case 5:return[2]}})})},e.prototype.refresh=function(e){var t=this;void 0===e&&(e={});var a=_.merge(_.cloneDeep(this._config),this._ysData[this._ysSetting]),n="SELECT * "+this._newColumns+" FROM ? "+this._filterSettings.where()+" order by "+a.orderBy+" ";alasql.promise(n,[this._arrayData]).then(function(n){for(var r=t.processTraces(n,a),o=0;o<r.length;o++){var i=r[o].name;i&&(r[o].visible=e[i])}Plotly.react(t._graphDiv,r,a.layout,t._plotlyConfig)})["catch"](function(e){console.log("Error:",e)})},e.prototype.addSelections=function(e,t){var a=this;if(0!=t.length){var n=document.createElement("div"),r=document.createElement("select");r.id="selectionDropdown",r.onchange=function(e){a._ysSetting=e.currentTarget.value,e.tbm_fired_manually||a.refresh(a.getVisibilityMap())};for(var o=0;o<t.length;o++){var i=t[o].name,s=document.createElement("option");s.innerText=i,r.append(s)}var l=document.createElement("label");l.innerText="Y Axis: ",l.htmlFor=r.id,n.append(l),n.append(r),this._filterDiv.append(n);var c=new Event("change");c.tbm_fired_manually=!0,r.dispatchEvent(c)}},e.prototype.getVisibilityMap=function(){var e=this._graphDiv.data,t={};return e&&e.map(function(e){return t[e.name]=e.visible}),t},e.prototype.addFilter=function(e,t){var a=this,n=Array.from(new Set(e.map(function(e){return e[t.column]})));n.sort(),"desc"==t.order&&n.reverse(),t.orderlist&&(n=t.orderlist);var r=document.createElement("select");r.onchange=function(e){a._filterSettings.set(t.name,e.currentTarget.value),e.tbm_fired_manually||a.refresh(a.getVisibilityMap())};for(var o=0,i=0;i<n.length;i++){var s=n[i],l=document.createElement("option");l.innerText=s,s==t["default"]&&(o=i),r.append(l)}r.options[o].selected=!0,this._filterDiv.append(r);var c=new Event("change");c.tbm_fired_manually=!0,r.dispatchEvent(c)},e.prototype.processTraces=function(e,t){var a=t.splitBy,n=Array.from(new Set(e.map(function(e){return e[a]})));n.sort();for(var r=[],o=(function(n){for(var o=0,s=t.traces;o<s.length;o++){var l=s[o],c=e.filter(function(e){return e[a]==n}),u=i.newTrace(l,c);"name"in u||(u.name=n),r.push(u)}}),i=this,s=0,l=n;s<l.length;s++){var c=l[s];o(c)}return r},e.prototype.newTrace=function(e,t){return this.recursivelyProcessTrace(e,t)},e.prototype.recursivelyProcessTrace=function(e,t){if(null==e||"object"!=typeof e)return e;var a={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(n.startsWith("_")){var o=n.substr(1);a[o]=this.processDbMap(r,t)}else a[n]=this.recursivelyProcessTrace(r,t)}return a},e.prototype.processDbMap=function(e,t){for(var a=[],n=0,r=t;n<r.length;n++)for(var o=r[n],i=0,s=e;i<s.length;i++){var l=s[i];l.hasOwnProperty("key")?a.push(this.processValue(o[l.key],l.type)):a.push(o[l])}return a},e.prototype.processValue=function(e,t){if("time"==t){var a=e.split(":"),n=new Date(0,0,0,+a[0],+a[1],+a[2]);return n}return e},e.setupGraph=function(t,a,n,r,o){return __awaiter(this,void 0,void 0,function(){var i,s,l,c,u,m,p,f,d,h;return __generator(this,function(v){switch(v.label){case 0:i=document.getElementById(t),s=document.createElement("div"),l=document.getElementById(a),c=document.createElement("div"),s.append(c),u=$.getJSON(r),m=$.getJSON(n),v.label=1;case 1:return v.trys.push([1,4,,5]),[4,Promise.all([u,m])];case 2:return p=v.sent(),f=_.merge(p[0],p[1]),[4,e.create(c,l,f,o)];case 3:return d=v.sent(),d.refresh(),i.innerHTML="",i.append(s),[3,5];case 4:return h=v.sent(),console.log("Error loading config",h),[3,5];case 5:return[2]}})})},e}();!function(e,t,a){e.colors=["#332288","#88CCEE","#117733","#DDCC77","#CC6677","#AA4499","#661100","#6699CC","#44AA99","#999933","#AA4466","#882255"],e.championRoleList=["Tank","Damage","Support","Flank"],e.roleLegendAbbreviation={Tank:"Tank",Flank:"Flank",Support:"Supt.",Damage:"Dmg."};var n=t.Deferred();e.chartsPromise=n.promise(),e.chartsReady=function(){n.resolve()},e.trackEvent=function(e){ga&&(e.hitType="event",ga("send",e))},e.RealHT=function(){this._hash={},this._keys=[]},e.RealHT.prototype={constructor:e.RealHT,put:function(e,t){e in this._hash||this._keys.push(e),this._hash[e]=t},get:function(e){return this._hash[e]},keys:function(){return this._keys}},e.getKeys=function(e){var t=[];for(var a in e)t.push(a);return t},e.arrayDiff=function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n];t.indexOf(r)<0&&a.push(r)}return a},e.stringToBool=function(e){switch(e){case"f":case"False":return!1;case"t":case"True":return!0}return null},e.merge=function(e,t){for(var a in t)if(t.hasOwnProperty(a))for(var n=t[a],r=e,o=a.split("."),i=0;i<o.length;i++){var s=o[i];i==o.length-1?r[s]=n:("undefined"==typeof r[s]&&(r[s]={}),r=r[s])}}}(window.tbm=window.tbm||{},jQuery);